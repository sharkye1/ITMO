from Informatics_Lab3_Task1 import find_VT_ITMO


# Теперь ожидаем сами совпадения (строки), а не только булево значение
TEST_CASES = [
    ("ВТ слово ИТМО", ["ВТ слово ИТМО"]),
    ("ВТ один два три четыре ИТМО", ["ВТ один два три четыре ИТМО"]),
    ("ВТ один два три четыре пять ИТМО", []),
    ("ВТ, слово1; слово2 ИТМО", ["ВТ, слово1; слово2 ИТМО"]),
    ("ВТ\nслово1 слово2 ИТМО", ["ВТ\nслово1 слово2 ИТМО"]),
    ("привет ВТ слово ИТМО мир", ["ВТ слово ИТМО"]),
    ("ВТИТМО", []),
    ("вт слово ИТМО", []),
    ("ВТ-слово ИТМО", ["ВТ-слово ИТМО"]),
    ("ВТ!!! слово ИТМО", ["ВТ!!! слово ИТМО"]),
    ("ВТ ИТМО", ["ВТ ИТМО"]),
    ("ВТ  ИТМО", ["ВТ  ИТМО"]),
    ("ВТ\tслово ИТМО", ["ВТ\tслово ИТМО"]),
    ("ВТ.слово.слово ИТМО", ["ВТ.слово.слово ИТМО"]),
    ("ВТ слово1 слово2 слово3 слово4 слово5 ИТМО", []),
    ("ВТ123 слово ИТМО", []),
    ("123ВТ слово ИТМО", []),
    ("ВТ-слово1-слово2 ИТМО", ["ВТ-слово1-слово2 ИТМО"]),
    ("ВТ слово, слово; слово: ИТМО", ["ВТ слово, слово; слово: ИТМО"]),
    ("ВТ слово1\nслово2\nслово3\nслово4 ИТМО", ["ВТ слово1\nслово2\nслово3\nслово4 ИТМО"]),
    ("ВТ слово1.word2 ИТМО", ["ВТ слово1.word2 ИТМО"]),
    ("ВТ ИТМО и ещё текст", ["ВТ ИТМО"]),
    ("перед ВТ ИТМО", ["ВТ ИТМО"]),
    ("ВТ!1 ИТМО", ["ВТ!1 ИТМО"]),
]


def run_tests():
    ln = len(TEST_CASES)
    passed = 0
    print("Всего тестов:", ln)
    print("-----   " * 15)

    for idx, (test_text, waiting) in enumerate(TEST_CASES, 1):
        matches = find_VT_ITMO(test_text)

        normalized = []
        if not matches:
            normalized = []
        else:
            try:
                # Попробуем итерироваться по matches
                for m in matches:
                    if hasattr(m, 'group'):
                        normalized.append(m.group(0))
                    else:
                        normalized.append(str(m))
            except TypeError:
                # matches не итерируемый (возможно одиночный match)
                if hasattr(matches, 'group'):
                    normalized = [matches.group(0)]
                else:
                    normalized = [str(matches)]

        if normalized == waiting:
            print(f"✅Тест {idx}: пройден✅")
            passed += 1
        else:
            print(f"❌Тест {idx}: НЕ ПРОЙДЕН❌")

        print("  Текст:", test_text)
        print("  Ожидалось:", waiting, " Получено:", normalized)
        print("-----   " * 15)

    print("Итого пройдено:", passed, "из", ln)


if __name__ == '__main__':
    run_tests()
